

import React, { useMemo, useState, useEffect } from "react";

// === Animated background (jour â†’ nuit) === function AnimatedBackground() { const [t, setT] = useState(new Date()); useEffect(() => { const id = setInterval(() => setT(new Date()), 60_000); return () => clearInterval(id); }, []); const hour = t.getHours(); // simple gradient by hour const bg = useMemo(() => { if (hour >= 6 && hour < 12) return "from-sky-200 via-sky-100 to-white"; // matin if (hour >= 12 && hour < 18) return "from-sky-300 via-white to-amber-100"; // jour if (hour >= 18 && hour < 21) return "from-orange-200 via-pink-200 to-indigo-200"; // coucher return "from-indigo-900 via-slate-900 to-black"; // nuit }, [hour]);

return ( <div className={fixed inset-0 -z-10 bg-gradient-to-b ${bg} transition-colors duration-700}></div> ); }

// === Small UI helpers === function Badge({ children }) { return ( <span className="inline-flex items-center gap-1 rounded-full bg-slate-900/80 text-white text-xs font-semibold px-2 py-1"> {children} </span> ); }

function Card({ children }) { return ( <div className="rounded-2xl border border-black/5 shadow-xl shadow-black/5 bg-white/80 backdrop-blur p-4">{children}</div> ); }

// === Mock data for Journal === const MOCK_ENTRIES = [ { id: "e1", type: "video", title: "Capsule du jour", date: "2025-08-18", emotion: "ðŸ˜Š Joie", tags: ["famille", "balade"], thumb: "https://images.unsplash.com/photo-1529336953121-ad5a0d43d0d2?q=80&w=800&auto=format&fit=crop", note: "Balade Ã  vÃ©lo avec LÃ©o, fou rire au parc.", }, { id: "e2", type: "audio", title: "PensÃ©e du soir", date: "2025-08-17", emotion: "ðŸ§˜ Calme", tags: ["rÃ©flexion"], thumb: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=800&auto=format&fit=crop", note: "Gratitude pour la journÃ©e, coucher de soleil magnifique.", }, { id: "e3", type: "photo", title: "Photo â€“ CafÃ© avec maman", date: "2025-08-16", emotion: "ðŸ’› Tendresse", tags: ["famille"], thumb: "https://images.unsplash.com/photo-1517701604599-bb29b565090c?q=80&w=800&auto=format&fit=crop", note: "Vieille histoire de son enfance, Ã  enregistrer demain.", }, { id: "e4", type: "text", title: "Souvenir d'Ã©cole", date: "2025-08-15", emotion: "ðŸ¤” Nostalgie", tags: ["souvenirs"], thumb: "https://images.unsplash.com/photo-1511910849309-0dffb57df0a1?q=80&w=800&auto=format&fit=crop", note: "Mon prof de sciences m'a offert ma premiÃ¨re boussole.", }, ];

// === Icon component (lightweight) === const Icon = ({ name, className = "w-5 h-5" }) => { const map = { video: ( <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}> <path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14" /> <rect x="3" y="6" width="12" height="12" rx="2" /> </svg> ), audio: ( <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}> <path d="M9 18V6l10-2v12" /> <circle cx="6" cy="18" r="3" /> <circle cx="18" cy="16" r="3" /> </svg> ), photo: ( <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}> <rect x="3" y="5" width="18" height="14" rx="2" /> <circle cx="8.5" cy="10.5" r="2" /> <path d="M21 16l-5-5-6 6" /> </svg> ), text: ( <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}> <path d="M4 6h16M4 12h10M4 18h16" /> </svg> ), search: ( <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}> <circle cx="11" cy="11" r="7" /> <path d="M20 20l-3-3" /> </svg> ), record: ( <svg viewBox="0 0 24 24" fill="currentColor" className={className}> <circle cx="12" cy="12" r="6" /> </svg> ), settings: ( <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}> <path d="M12 15a3 3 0 100-6 3 3 0 000 6z" /> <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 11-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 11-4 0v-.09a1.65 1.65 0 00-1-1.51 1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 11-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 110-4h.09a1.65 1.65 0 001.51-1 1.65 1.65 0 00-.33-1.82l-.06-.06A2 2 0 114 3.29l.06.06a1.65 1.65 0 001.82.33H6A1.65 1.65 0 007.51 3V3a2 2 0 114 0v.09c0 .67.39 1.27 1 1.51.61.24 1.31.11 1.82-.33l.06-.06A2 2 0 1120.71 6l-.06.06c-.44.51-.57 1.21-.33 1.82.24.61.84 1 1.51 1H22a2 2 0 110 4h-.09c-.67 0-1.27.39-1.51 1z" /> </svg> ), }; return map[name] || null; };

// === Header & Nav === function Header({ onNav, active }) { return ( <header className="sticky top-0 z-40 backdrop-blur bg-white/50 border-b border-black/5"> <div className="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3"> <div className="flex items-center gap-3 mr-auto"> <div className="w-9 h-9 rounded-full bg-gradient-to-br from-amber-300 to-orange-400 shadow" /> <div className="font-extrabold tracking-tight text-slate-900">MÃ©moire</div> <div className="text-xs text-slate-600">Journal de vie & Transmission</div> </div> {[ { id: "home", label: "Accueil" }, { id: "journal", label: "Journal" }, { id: "record", label: "Capsule" }, { id: "settings", label: "Espace perso" }, ].map((item) => ( <button key={item.id} onClick={() => onNav(item.id)} className={px-3 py-1.5 rounded-xl text-sm font-semibold hover:bg-black/5 ${ active === item.id ? "bg-black/10" : "" }} > {item.label} </button> ))} </div> </header> ); }

// === Home === function Home({ goRecord, goJournal }) { return ( <div className="max-w-6xl mx-auto px-4 py-10 grid md:grid-cols-2 gap-6"> <Card> <h1 className="text-4xl md:text-5xl font-serif font-bold leading-tight text-slate-900"> Chaque jour laisse une trace. </h1> <p className="mt-2 text-slate-600"> Enregistre une capsule, Ã©cris une pensÃ©e, garde une photo. Demain, ces moments formeront ton histoire. </p> <div className="mt-5 flex flex-wrap gap-3"> <button onClick={goRecord} className="px-4 py-2 rounded-xl bg-slate-900 text-white font-bold flex items-center gap-2"> <Icon name="record" className="w-4 h-4" /> DÃ©marrer la capsule du jour </button> <button onClick={goJournal} className="px-4 py-2 rounded-xl bg-white border font-semibold"> Ouvrir le journal </button> </div> </Card>

<Card>
    <h3 className="text-2xl font-serif font-semibold">Rappels intelligents</h3>
    <p className="text-slate-600">L'app te propose de petites questions au bon moment :</p>
    <ul className="mt-2 list-disc pl-5 text-slate-700 space-y-1">
      <li>Â« Qu'est-ce qui t'a touchÃ© aujourd'hui ? Â»</li>
      <li>Â« Un mot pour tes enfants ? Â»</li>
      <li>Â« Une photo qui mÃ©rite de rester ? Â»</li>
    </ul>
    <div className="mt-4 flex gap-2 flex-wrap">
      <Badge>Capsules 1 min</Badge>
      <Badge>Analyse Ã©motion</Badge>
      <Badge>Transmission sÃ©curisÃ©e</Badge>
    </div>
  </Card>
</div>

); }

// === Journal === function Journal() { const [q, setQ] = useState(""); const [filterType, setFilterType] = useState("all"); const filtered = useMemo(() => { return MOCK_ENTRIES.filter((e) => (filterType === "all" || e.type === filterType) && (q === "" || e.title.toLowerCase().includes(q.toLowerCase()) || e.note.toLowerCase().includes(q.toLowerCase())) ); }, [q, filterType]);

return ( <div className="max-w-6xl mx-auto px-4 py-8"> <div className="flex flex-col md:flex-row md:items-center gap-3 mb-4"> <div className="flex items-center gap-2 px-3 py-2 rounded-xl bg-white border w-full md:w-auto"> <Icon name="search" /> <input value={q} onChange={(e) => setQ(e.target.value)} placeholder="Rechercher un souvenir (mot, Ã©motion, lieu)" className="outline-none bg-transparent w-full md:w-80" /> </div> <div className="flex items-center gap-2"> {[ { id: "all", label: "Tout" }, { id: "video", label: "VidÃ©os" }, { id: "audio", label: "Audios" }, { id: "photo", label: "Photos" }, { id: "text", label: "Textes" }, ].map((f) => ( <button key={f.id} onClick={() => setFilterType(f.id)} className={px-3 py-1.5 rounded-xl text-sm font-semibold border ${ filterType === f.id ? "bg-slate-900 text-white" : "bg-white" }} > {f.label} </button> ))} </div> </div>

<div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
    {filtered.map((e) => (
      <Card key={e.id}>
        <div className="aspect-video w-full overflow-hidden rounded-xl mb-3">
          <img src={e.thumb} alt="aperÃ§u" className="w-full h-full object-cover" />
        </div>
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-2 font-semibold">
            <Icon name={e.type} />
            <span>{e.title}</span>
          </div>
          <span className="text-xs text-slate-500">{new Date(e.date).toLocaleDateString()}</span>
        </div>
        <p className="mt-2 text-slate-700 text-sm">{e.note}</p>
        <div className="mt-3 flex flex-wrap gap-2">
          <Badge>{e.emotion}</Badge>
          {e.tags.map((t) => (
            <span key={t} className="px-2 py-1 rounded-full bg-slate-100 text-slate-700 text-xs">#{t}</span>
          ))}
        </div>
      </Card>
    ))}
  </div>
</div>

); }

// === Record Capsule (mock) === function RecordCapsule({ onSaved }) { const [status, setStatus] = useState("idle"); const start = () => setStatus("recording"); const stop = () => setStatus("saved"); useEffect(() => { if (status === "saved") { const id = setTimeout(() => onSaved && onSaved(), 1000); return () => clearTimeout(id); } }, [status, onSaved]);

return ( <div className="max-w-3xl mx-auto px-4 py-10"> <Card> <h2 className="text-3xl font-serif font-semibold mb-1">Capsule quotidienne (1 minute)</h2> <p className="text-slate-600 mb-4">RÃ©ponds aux questions en parlant face camÃ©ra. Ta vidÃ©o sera analysÃ©e (Ã©motion, mots-clÃ©s) et ajoutÃ©e Ã  ton journal.</p> <ul className="text-slate-700 list-disc pl-5 mb-4 space-y-1"> <li>Qu'est-ce qui t'a fait sourire aujourd'hui ?</li> <li>Un conseil Ã  laisser Ã  tes enfants ?</li> <li>Un souvenir Ã  ne pas oublier ?</li> </ul> <div className="flex items-center gap-3 mt-2"> {status !== "recording" ? ( <button onClick={start} className="px-4 py-2 rounded-xl bg-rose-600 text-white font-bold flex items-center gap-2"> <Icon name="record" className="w-4 h-4" /> Enregistrer </button> ) : ( <button onClick={stop} className="px-4 py-2 rounded-xl bg-emerald-600 text-white font-bold">Stop & sauvegarder</button> )} <span className={text-sm font-semibold ${status === "recording" ? "text-rose-700" : "text-slate-600"}}> {status === "idle" && "PrÃªt"} {status === "recording" && "Enregistrement en coursâ€¦ (simulation)"} {status === "saved" && "SauvegardÃ© ! Redirectionâ€¦"} </span> </div> </Card> </div> ); }

// === Settings / Espace perso (skeleton) === function Settings() { return ( <div className="max-w-5xl mx-auto px-4 py-8 grid md:grid-cols-2 gap-4"> <Card> <h3 className="text-2xl font-serif font-semibold">VolontÃ©s & hÃ©ritage</h3> <p className="text-slate-600">DÃ©finis la rÃ©partition des biens, les consignes funÃ©raires, et les messages diffÃ©rÃ©s.</p> <div className="mt-3 flex gap-2 flex-wrap"> <Badge>Testament</Badge> <Badge>Messages posthumes</Badge> <Badge>RÃ©partition biens</Badge> </div> </Card> <Card> <h3 className="text-2xl font-serif font-semibold">Coffre-fort sÃ©curisÃ©</h3> <p className="text-slate-600">Documents, codes, identifiants. AccÃ¨s biomÃ©trique + clÃ© d'urgence.</p> <div className="mt-3 flex gap-2 flex-wrap"> <Badge>Chiffrage AES-256</Badge> <Badge>2FA</Badge> <Badge>Journal d'accÃ¨s</Badge> </div> </Card> <Card> <h3 className="text-2xl font-serif font-semibold">Vie quotidienne</h3> <ul className="text-slate-700 list-disc pl-5 space-y-1"> <li>Rappels santÃ© (mÃ©dicaments, eau, sommeil)</li> <li>Entretiens (chaudiÃ¨re, contrÃ´le technique, vaccins)</li> <li>Suggestions d'idÃ©es & projets de vie</li> </ul> </Card> <Card> <h3 className="text-2xl font-serif font-semibold">ConfidentialitÃ©</h3> <ul className="text-slate-700 list-disc pl-5 space-y-1"> <li>Suppression sÃ©curisÃ©e aprÃ¨s dÃ©cÃ¨s</li> <li>Transmission aux proches dÃ©signÃ©s</li> <li>Liste blanche / noire de contenus</li> </ul> </Card> </div> ); }

// === Root App with simple navigation === export default function App() { const [view, setView] = useState("home"); return ( <div className="min-h-screen text-slate-900"> <AnimatedBackground /> <Header active={view} onNav={setView} />

{view === "home" && (
    <Home goRecord={() => setView("record")} goJournal={() => setView("journal")} />
  )}
  {view === "journal" && <Journal />}
  {view === "record" && <RecordCapsule onSaved={() => setView("journal")} />}
  {view === "settings" && <Settings />}

  <footer className="max-w-6xl mx-auto px-4 py-12 text-sm text-slate-600">
    <div className="grid md:grid-cols-3 gap-4">
      <div>
        <div className="font-bold text-slate-900">MÃ©moire</div>
        <p>Journal de vie poÃ©tique & transmission sÃ©curisÃ©e.</p>
      </div>
      <div>
        <div className="font-semibold">Guides</div>
        <ul className="list-disc pl-5">
          <li>Capturer une capsule quotidienne</li>
          <li>CrÃ©er un message posthume</li>
          <li>Renseigner ses volontÃ©s</li>
        </ul>
      </div>
      <div>
        <div className="font-semibold">LÃ©gal & confidentialitÃ©</div>
        <p>Chiffrement bout-Ã -bout, contrÃ´le d'accÃ¨s, et effacement programmÃ©.</p>
      </div>
    </div>
    <div className="mt-6">Â© 2025 â€“ Prototype v1</div>
  </footer>
</div>

); }
